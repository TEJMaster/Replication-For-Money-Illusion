---
title: "Replicating the \"Money Illusion\" Effect: Exploring Gender Influences within a Brazilian Sample"
title-block-banner: true
abstract: "Money illusion as the tendency to overlook the impact of inflation which  focusing on nominal values identified by Shafir, Diamond, and Tversky (1997). This study reproduce four scenarios from research where participants face financial decisions influenced by money illusion in various situations such as earnings, transactions, and contracts,under the background of Brazilian context, where in various situations such as transactions, transactions and earnings that participants face financial decisions influenced by money illusion. The cross-sectional and pre-registered research is based on 372 Brazilian participants in mobile phones or computers by using chi-square tests assessed money illusion. The results indicate that participants' tend to choose financially advantages opportunities which  influenced by the framing of terms (real, nominal, or neutral). After we replicate across all four scenarios, the findings suggest that the money illusion effect  transcend cultural boundaries, supported by replication within a different background of cultural context."
thanks: "Code and data supporting this analysis are available at https://github.com/TEJMaster/Student-Replication-For-Money-Illusion.git"
author: "Terry Tu, Jingyi Shen, Yaning Jin "
date: today
date-format: long
format: pdf
toc: true
toc-depth: 2
number-sections: true
bibliography: references.bib
link-citations: true
---

```{r setup, include=FALSE, message=FALSE}
# Un-comment these lines for missing packages
# install.packages("lubridate")
# install.packages("dplyr")
# install.packages("ggplot2")
# install.packages("here")
# install.packages("readr")
# install.packages("tidyverse")
# install.packages("readxl")

## Import nessasay libraries
library(readxl)
library(ggplot2)
library(dplyr)
library(tidyverse)
library(here)
library(readr)
knitr::opts_chunk$set(echo = FALSE)
```

## Introduction

Money illusion refers to a cognitive bias where individuals tend to assess the value of money solely based on its nominal value. The real value of money is the nominal value of money plus the inlation rate. thereby overlooking the impact of inflation. This bias can lead to various consequences, such as reluctance to sell assets due to perceived nominal losses, misunderstanding wage increases, and more.

The influential 1997 study by Shafir and colleagues[@shafir1997money] has significantly impacted on economic psychology and behavioral economics which introduced the concept of money illusion. The authors argued that money illusion could explain phenomena like inflexible wages and contracts which contrary to traditional economic theories assuming rationality in decision-making.

When shopping, people often ignore information that is clearly distorted by inflation and impulsively raise the psychological price above the actual price, which is the money illusion. Money illusions can lead potential buyers to believe that house prices will always rise, and thus that real estate is a good investment. Robert J. Shiller, a professor of economics at Yale University in the United States, believes that it is the false logic caused by the monetary illusion that led to the real estate bubble, "people mostly only remember the price of a few years ago when they bought a house, but often forget the price of other goods, andmistakenly believe that house prices have risen more than other prices." Thus exaggerating the investment potential of real estate"[@Shiller].

For decades, economists have debated whether the money illusion is real or, more generally, whether there are irrational influences in economic transactions. Milton Friedman, the famous monetary theorist, assumed that employers and consumers were rational, paying wages or buying goods with inflation in mind. In other words, they can accurately judge the true value of a commodity[@friedman2010milton].

Recognizing the importance of testing theories in different contexts for generalizability, our study aims to investigate the presence of the money illusion effect in a Brazilian cultural setting. Specifically, we aim to replicate four problems proposed by Shafir and colleagues [@shafir1997money]and examine if Brazilians exhibit money illusion biases.

In this paper, our hypothesis are across all four problems: in problem 1, individuals inclined to perceive wage increases significantly in real term even if it is small in nominal terms; In problem 2, individuals will evaluate house deals based on nominal gains rather than real gains; In problem 3, participants will be less likely to purchase new items rather than second hand items when prices increase nominally; In problem 4, individuals might prefer riskier contracts in real terms over safer options presented in nominal terms.

## Data

The raw dataset for our study, derived from the replication of the "Money Illusion" effect among Brazilian researchers [@Santiago_Feldman_Ferreira_Batistuzzo_Fatori_Seda_Bastos_2023], is archived and accessible through the Open Science Framework (OSF). This dataset encompasses the complete set of responses collected through our online survey, including socio-demographic information, responses to the money illusion problems, and verification question answers. Interested researchers can access the dataset for further analysis or replication studies at the following URL: https://osf.io/48pqu/.

```{r include=FALSE, message=FALSE}
# read the data file and store it in the 'data' variable
data <- read_csv(here("outputs", "data", "cleaned_money_data.csv"))
```

### Dataset Description

The data were collected via an online survey platform and include a range of variables:

**Socio-demographic Information**: Participants provided details about their educational background, area of study (if applicable), average monthly family income, and the number of people living off this income.

**Economic Decision-Making Scenarios**: The core of the dataset revolves around responses to hypothetical scenarios designed to assess susceptibility to the money illusion. These scenarios include decisions about signing contracts under inflation uncertainty, and buying or selling items after an inflation increase, reflecting real-life economic decisions that people might face.

**Temporal and Response Details**: Each record includes timestamps for the start and end of the survey, the type of response, progress through the survey, duration in seconds, and completion status.

**Verification Questions**: To ensure participants understood the scenarios accurately, verification questions were included. These serve as a quality control measure, filtering for data quality and comprehension.

### Data Analysis Tools

The data analysis was performed using R [@r], a powerful open-source statistical programming language. Key packages from the tidyverse collection [@rTidyverse] were employed to streamline data manipulation, visualization, and analysis processes. These packages include ggplot2 [@rGgplot2] for creating advanced graphics, dplyr [@rDplyr] for data manipulation, readr [@rReadr] for its robust data reading functionalities, here [@R-here] is used to avoid file path issue, and knitr [@rKnitr] for dynamic report generation. 

### Data Cleaning

### Data Sample

```{r table1, echo=FALSE}
selected_data <- data %>%
  select(1:2, (ncol(data)-2):ncol(data))

knitr::kable(head(selected_data, 6), 
             caption = "Sample of the Cleaned Money Illusion Data for Question 1",
             format = "markdown")
```
```{r table2, echo=FALSE}
selected_data <- data %>%
  select(1:2, 12:14)

knitr::kable(head(selected_data, 6), 
             caption = "Sample of the Cleaned Money Illusion Data for Question 2",
             format = "markdown")
```

```{r table3, echo=FALSE}
selected_data <- data %>%
  select(1:2, 7:9)

knitr::kable(head(selected_data, 6), 
             caption = "Sample of the Cleaned Money Illusion Data for Question 3",
             format = "markdown")
```

```{r table4, echo=FALSE}
selected_data <- data %>%
  select(1:5)

knitr::kable(head(selected_data, 6), 
             caption = "Sample of the Cleaned Money Illusion Data for Question 4",
             format = "markdown")
```

### Measurement

\newpage

## Results

### Problem 1: 
```{r echo=FALSE}
# Function to create plot based on gender
create_gender_plot <- function(gender, data) {
  # Translate 'gênero' to English and filter data for the specific gender
  gender_data <- data %>%
    mutate(gênero = recode(gênero, 'Mulher' = 'Female', 'Homem' = 'Male')) %>%
    filter(gênero == gender) %>%
    gather(key = "category", value = "choice", economicam, felicidade, atratividade_trab) %>%
    filter(!is.na(choice))

  # Calculate the percentage of non-NA responses for each category
  freq_data <- gender_data %>%
    count(category, choice) %>%
    group_by(category) %>%
    mutate(Percentage = n / sum(n) * 100) %>%
    ungroup()

  # Modify the category names to translate to English
  freq_data$category <- recode(freq_data$category,
                               "economicam" = "Economic Terms",
                               "felicidade" = "Happiness",
                               "atratividade_trab" = "Job Attractiveness")

  # Creating the plot with ggplot2
  plot <- ggplot(data = freq_data, aes(x = category, y = Percentage, fill = choice)) +
    geom_bar(stat = "identity", position = position_dodge(), color = "black") +
    scale_fill_brewer(palette = "Pastel1") +
    labs(
         title = paste("Choices Distribution for", gender, "in Money Illusion Experiment 1"),
         x = "Condition",
         y = "Percentage"
    ) +
    theme(
          legend.position = "bottom",
          axis.text.x = element_text(angle = 45, hjust = 1),
          plot.title = element_text(hjust = 0.5),
          plot.caption = element_text(hjust = 0.5)
    ) +
    ylim(0, 100)

  # Return the plot
  return(plot)
}
```

```{r fig-problem1-female, echo=FALSE, fig.cap="The percentage of female participants' choices within each condition in problem 1."}
# Create plots for 'Female'
plot_female <- create_gender_plot("Female", data)
# Display the plots
print(plot_female)
```
\newpage
```{r fig-problem1-male, echo=FALSE, fig.cap="The percentage of male participants' choices within each condition in problem 1."}
# Create plots for 'Female'
plot_male <- create_gender_plot("Male", data)
# Display the plots
print(plot_male)
```
\newpage

### Problem 2:

```{r echo=FALSE}
# Translate 'gênero' to English and remove rows with NA choices
data2 <- data %>%
  mutate(gênero = recode(gênero, 'Mulher' = 'Female', 'Homem' = 'Male')) %>%
  filter(!is.na(`A casa_1`), !is.na(`A casa_2`), !is.na(`A casa_3`))

# Reshape the data for plotting
Prob2_data <- data2 %>%
  pivot_longer(cols = c(`A casa_1`, `A casa_2`, `A casa_3`),
               names_to = "Seller_Rank",
               values_to = "Choice") %>%
  mutate(Seller_Rank = recode(Seller_Rank,
                               `A casa_1` = "Andre",
                               `A casa_2` = "Bento",
                               `A casa_3` = "Marcelo"),
         Choice = factor(Choice, levels = c(1, 2, 3), labels = c("First Choice", "Second Choice", "Third Choice"))) %>%
  group_by(gênero, Seller_Rank, Choice) %>%
  summarise(Count = n(), .groups = 'drop')

# Calculate the percentages without NA values
Prob2_data <- Prob2_data %>%
  group_by(gênero, Choice) %>%
  mutate(Percentage = Count / sum(Count) * 100) %>%
  ungroup()

# Function to create plot for each gender
create_plot <- function(gender, data) {
  gender_data <- data %>%
    filter(gênero == gender)
  
  # Plot
  ggplot(gender_data, aes(x = Choice, y = Percentage, fill = Seller_Rank)) +
    geom_bar(stat = "identity", position = position_dodge(), color = "black") +
    scale_fill_brewer(palette = "Pastel1") +
    labs(
      title = paste("Choice Distribution for", gender, "in Money Illusion Experiment 2"),
      x = "Rank",
      y = "Percentage",
      fill = "Seller"
    ) +
    theme(legend.position = "bottom") +
    ylim(0, 100)
}
```


```{r fig-problem2-female, echo=FALSE, fig.cap="The percentage of female participants' choices ranking each seller in problem 2"}
# Create plots for 'Female'
plot_female2 <- create_plot("Female", Prob2_data)
# Display the plots
print(plot_female2)
```
\newpage
```{r fig-problem2-male, echo=FALSE, fig.cap="The percentage of male participants' choices ranking each seller in problem 2"}
# Create plots for 'Female'
plot_male2 <- create_plot("Male", Prob2_data)
# Display the plots
print(plot_male2)
```
\newpage
### Problem 3

```{r echo=FALSE}
# Translate the terms to English and filter out NA values selectively
data3 <- data %>%
  mutate(
    across(
      .cols = c("poltrona_venda_reais", "poltrona_compra_reai", "poltrona_venda_porce"),
      .fns = ~ case_when(
        . == "Menos suscetível" ~ "Less",
        . == "Mais suscetível" ~ "More",
        . == "Igual" ~ "Same",
        TRUE ~ NA_character_
      )
    ),
    gênero = recode(gênero, 'Mulher' = 'Female', 'Homem' = 'Male')
  )


# Reshape the data for plotting
Prob3_data <- data3 %>%
  pivot_longer(
    cols = c("poltrona_venda_reais", "poltrona_compra_reai", "poltrona_venda_porce"),
    names_to = "Condition",
    values_to = "Likelihood"
  ) %>%
  filter(!is.na(Likelihood)) %>%
  mutate(
    Decision = case_when(
      str_detect(Condition, "compra") ~ "Buy",
      str_detect(Condition, "venda") ~ "Sell"
    ),
    Likelihood = factor(Likelihood, levels = c("More", "Same", "Less"))
  )


# Counting and percentage calculation
Prob3_data <- Prob3_data %>%
  count(gênero, Decision, Likelihood) %>%
  group_by(gênero, Decision) %>%
  mutate(Percentage = n / sum(n) * 100) %>%
  ungroup()

# Function to create plot for each gender
create_plot <- function(gender, data) {
  gender_data <- data %>%
    filter(gênero == gender)
  # Plot
  ggplot(gender_data, aes(x = Decision, y = Percentage, fill = Likelihood)) +
    geom_bar(stat = "identity", position = position_dodge(), color = "black") +
    scale_fill_brewer(palette = "Pastel1") +
    labs(
      title = paste("Choice Distribution for", gender, "in Money Illusion Experiment"),
      x = "Decision",
      y = "Percentage",
      fill = "Likelihood"
    ) +
    theme(legend.position = "bottom") +
    ylim(0, 100)
}
```

```{r fig-problem3-female, echo=FALSE, fig.cap="The percentage of female participants' choices (more, same, less) for both 'buy' and 'sell' conditions in problem 3"}
# Create plots for 'Female'
plot_female3 <- create_plot("Female", Prob3_data)
# Display the plots
print(plot_female3)
```
\newpage
```{r fig-problem3-male, echo=FALSE, fig.cap="The percentage of male participants' choices (more, same, less) for both 'buy' and 'sell' conditions in problem 3"}
# Create plots for 'Female'
plot_male3 <- create_plot("Male", Prob3_data)
# Display the plots
print(plot_male3)
```
\newpage
### Problem 4
```{r echo=FALSE}

```


## Conclusion

## Reference

